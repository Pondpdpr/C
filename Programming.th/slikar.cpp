// https://programming.in.th/task/rev2_problem.php?pid=1037
#include <bits/stdc++.h>
using namespace std;
struct node{
    int x,y;
}t;
int n,m,che[55][55],mem[55][55],t1,t2;
int ex,ey,tx,ty,tval;
int cx[]={-1,0,1,0};
int cy[]={0,1,0,-1};
char c1;
queue<node>qw;
queue<node>q;
bool border(int x,int y){
    if(x>=0 && x<n && y>=0 && y<m) return 1;
    return 0;
}
int main(){
    int i,j;
    scanf("%d%d",&n,&m);
    for(i=0;i<n;i++)
        for(j=0;j<m;j++)
        {
            scanf(" %c",&c1);
            if(c1=='S') q.push({i,j});
            else if(c1=='D') ex=i,ey=j,che[ex][ey]=1e9;
            else if(c1=='X') che[i][j]=1;
            else if(c1=='*') qw.push({i,j});
        }
    while(!qw.empty())
    {
        t=qw.front(); qw.pop();
        tval=che[t.x][t.y]+1;
//        printf("at %d %d",t.x,t.y);
        for(i=0;i<4;i++)
        {
//            printf("to %d %d \n",tx,ty);
            tx=t.x+cx[i];
            ty=t.y+cy[i];
            if(border(tx,ty) && (!che[tx][ty] || tval<che[tx][ty]) && (tx!=ex || ty!=ey))
            {
//                printf("go\n");
                che[tx][ty]=tval;
                qw.push({tx,ty});
            }
        }
    }
//    for(i=0;i<n;i++)
//    {
//        for(j=0;j<m;j++) printf("%d ",che[i][j]);
//        printf("\n");
//    }
    while(!q.empty())
    {
        t=q.front(); q.pop();
        tval=mem[t.x][t.y]+1;
        for(i=0;i<4;i++)
        {
            tx=t.x+cx[i];
            ty=t.y+cy[i];
            if(border(tx,ty) && !mem[tx][ty] && (tval<che[tx][ty] || !che[tx][ty]))
            {
                if(tx==ex && ty==ey)
                {
                    printf("%d",tval);
                    return 0;
                }
                q.push({tx,ty});
                mem[tx][ty]=tval;
            }
        }
    }
    printf("KAKTUS");
}
/*
50 50

D.................................................

.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.XX.............................................X.

...*............................................X.

.XX.............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

.X..............................................X.

SXXXXXXXXXXXXXXXXXXXXXXXX.X.XXXXXXXXXXXXXXXXXXXXX.

..........................X.......................
*/
